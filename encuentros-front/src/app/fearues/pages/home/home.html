<body>
  <header>
    <div class="top">
      <div class="brand">
        <div class="logo">💬</div>
        <div class="month">{{month}}</div>
      </div>
      <button class="btn-create" (click)="toggleCreate()">➕ Crear encuentro</button>
    </div>
  </header>

  <!-- Formulario creación de encuentro -->
  <section *ngIf="showCreate" class="create-section">
    <form (ngSubmit)="createEncuentro()" class="create-form">
      <div>
        <label>Título</label>
        <input name="titulo" [(ngModel)]="newEncuentro.titulo" required />
      </div>
      <div>
        <label>Descripción</label>
        <textarea name="descripcion" [(ngModel)]="newEncuentro.descripcion" required></textarea>
      </div>
      <div>
        <label>Lugar</label>
        <input name="lugar" [(ngModel)]="newEncuentro.lugar" required />
      </div>
      <div>
        <label>Fecha y hora</label>
        <input type="datetime-local" name="fecha" [(ngModel)]="newEncuentro.fecha" required />
      </div>
      <div class="actions">
        <button type="submit" [disabled]="creating">Crear</button>
        <button type="button" (click)="toggleCreate()">Cancelar</button>
      </div>
    </form>
  </section>

  <main class="container">
    <!-- KPI -->
    <section class="kpi" aria-label="Resumen">
      <div class="item"><div class="big">{{encuentrosHoy}}</div><div>Encuentros hoy</div></div>
      <div class="item"><div class="big">{{encuentrosMes}}</div><div>Este mes</div></div>
      <div class="item"><div class="big">{{encuentrosPendientes}}</div><div>Pendientes</div></div>
    </section>

    <!-- Calendario -->
    <section class="calendar" aria-label="Calendario mensual">
      <div class="cal-head">
        <div>Lun</div><div>Mar</div><div>Mié</div><div>Jue</div><div>Vie</div><div>Sáb</div><div>Dom</div>
      </div>
      <div class="cal-grid">
        <div class="day" *ngFor="let d of days">
          <div class="dnum">{{ d }}</div>
          <div class="dot" *ngIf="daysWithEncuentros.has(d)"></div>
        </div>
      </div>
    </section>

    <!-- Lista de próximos -->
    <section class="list" aria-label="Próximos encuentros">
      <div *ngIf="upcoming && upcoming.length === 0" class="muted">No hay próximos encuentros</div>
      <div class="card" *ngFor="let e of upcoming">
        <div>
          <strong>{{ e.titulo }}</strong><br>
          <span class="muted">{{ e.displayWhen }}</span>
          <div class="small muted">{{ e.descripcion }}</div>
        </div>
      </div>
    </section>
  </main>

  <!-- Navegación inferior -->
  <nav class="bottom" aria-label="Navegación">
    <div class="nav-wrap">
      <a class="tab active" routerLink="/home">🗓️ <span>Calendario</span></a>
      <a class="tab" routerLink="/chats">💬 <span>Chats</span></a>
      <a class="tab" routerLink="/search">🔎 <span>Buscar</span></a>
      <a class="tab" routerLink="/account">⚙️ <span>Cuenta</span></a>
      <a class="tab" routerLink="/notifications">🔔 <span>Notificaciones</span></a>
    </div>
  </nav>
</body>
